<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pembagian Kelompok</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffe6f0; /* Soft pink */
            color: #333;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        h1 {
            color: #d15b82;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .kelompok {
            margin: 10px 0;
            padding: 10px;
            background-color: #ffd6e7;
            border-radius: 5px;
        }
        button {
            background-color: #d15b82;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #b24a6a;
        }
        input {
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #d15b82;
            width: 50px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pembagian Kelompok</h1>
        <label for="jumlahKelompok">Masukkan jumlah kelompok (2-14):</label>
        <input type="number" id="jumlahKelompok" min="2" max="14" value="2">
        <button onclick="bagiKelompok()">Bagi Kelompok</button>
        <div id="hasil"></div>
    </div>

    <script>
        const dataKelas = [
            { nama: "Alliza", gender: "cewe" },
            { nama: "Annisa", gender: "cewe" },
            { nama: "Aulia", gender: "cewe" },
            { nama: "Azkha", gender: "cowo" },
            { nama: "Bagus", gender: "cowo" },
            { nama: "Devira", gender: "cewe" },
            { nama: "Fathiyah", gender: "cewe" },
            { nama: "Fatimah", gender: "cewe" },
            { nama: "Julianto", gender: "cowo" },
            { nama: "Kamila", gender: "cewe" },
            { nama: "Kayla", gender: "cewe" },
            { nama: "Khusnul", gender: "cewe" },
            { nama: "Linda", gender: "cewe" },
            { nama: "Aal", gender: "cowo" },
            { nama: "Jihan", gender: "cewe" },
            { nama: "Nadias", gender: "cewe" },
            { nama: "Ami", gender: "cewe" },
            { nama: "Dita", gender: "cewe" },
            { nama: "Nala", gender: "cowo" },
            { nama: "Maul", gender: "cowo" },
            { nama: "Raniyah", gender: "cewe" },
            { nama: "Revita", gender: "cewe" },
            { nama: "Risda", gender: "cewe" },
            { nama: "Shafa", gender: "cewe" },
            { nama: "Wahyu", gender: "cowo" },
            { nama: "Bayu", gender: "cowo" },
            { nama: "Yasser", gender: "cowo" },
            { nama: "Yeni", gender: "cewe" }
        ];

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function bagiKelompok() {
            const jumlahKelompok = parseInt(document.getElementById("jumlahKelompok").value);
            if (jumlahKelompok < 2 || jumlahKelompok > 14) {
                alert("Jumlah kelompok harus antara 2 dan 14!");
                return;
            }

            const cowo = dataKelas.filter(s => s.gender === "cowo");
            const cewe = dataKelas.filter(s => s.gender === "cewe");

            // Prioritaskan Bagus dan Raniyah agar 98% sekelompok
            const bagusRaniyahProbability = Math.random();
            if (bagusRaniyahProbability < 0.98) {
                const kelompokBagusRaniyah = [cowo.find(s => s.nama === "Bagus"), cewe.find(s => s.nama === "Raniyah")];
                shuffle(kelompokBagusRaniyah);
                // Gabungkan mereka ke dalam satu kelompok
                const gabungan = [...cowo, ...cewe].filter(s => s.nama !== "Bagus" && s.nama !== "Raniyah");
                gabungan.push(...kelompokBagusRaniyah);
                shuffle(gabungan);

                // Pembagian kelompok merata
                const totalSiswa = gabungan.length;
                const anggotaPerKelompok = Math.floor(totalSiswa / jumlahKelompok);
                const sisa = totalSiswa % jumlahKelompok;

                const kelompok = Array.from({ length: jumlahKelompok }, () => []);

                let i = 0;
                while (gabungan.length) {
                    const targetSize = anggotaPerKelompok + (i < sisa ? 1 : 0);
                    while (kelompok[i].length < targetSize && gabungan.length) {
                        kelompok[i].push(gabungan.pop());
                    }
                    i = (i + 1) % jumlahKelompok;
                }

                tampilkanKelompok(kelompok);
            }
        }

        function tampilkanKelompok(kelompok) {
            const hasilDiv = document.getElementById("hasil");
            hasilDiv.innerHTML = "";

            kelompok.forEach((k, index) => {
                const div = document.createElement("div");
                div.className = "kelompok";
                div.innerHTML = `<strong>Kelompok ${index + 1}:</strong> ${k.map(s => s.nama).join(", ")}`;
                hasilDiv.appendChild(div);
            });
        }
    </script>
</body>
</html>
